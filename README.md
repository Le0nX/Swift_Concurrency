# Swift_Concurrency
Конспект по многопоточности в iOS.

## Содержание
* [GCD and Operations](#gcd-&-operations)

## GCD & Operations
В iOS представлены два основных способа взаимодействия с монгопоточностью:
* Grand Central Dispatch (**GCD**)
* Operations

GCD представляет из себя пулл потоков, которые менеджатся самой системой, и FIFO очереди с блоками(closures), которые отдаются на исполнение пулу потоков. Нет никакой гарантии какой именно поток возьмется за исполнение блока. 

### Синхронность и асинхронность
Блок может быть передан в очередь на синхронное или асинхронное исполнение. Если блок был передан в очередь на синхронное исоплнение, то текущий цикл будет заблокирован до тех пор, пока блок не будет полностью исполнен. В случае асинхронного исполнения блокировки не происходит и после передачи блока на асинхронное исполнение, управление сразу возвращается текущему циклу - в этом случае приложение может продолжать выполнять свои другие задачи, пока асинхронно исполняется наш блок. 

**Важно помнить, что FIFO не гарантирует нам порядок *завершения* задач. Единственная гарантия, которую мы получаем - порядок *начала* исполнения задач.**

В целом мы будем стремиться добавить все тяжелые таски не связанные с UI в асинхронную background очередь. 

```swift
// создаем очередь со своей уникальной меткой
let queue = DispatchQueue(label: "com.nefedov.denis")
// Дальше где-то в функции
queue.async {
 // вызываем медленные non-UI таски здесь
 DispatchQueue.main.async {
    // Здесь обновляем UI
 } 
}
```

### Последовательные и параллельные очереди
Очередь, в которую мы можем добавить наши блоки(таски), бывает последовательной и параллельной. Очевидно, что последовательная очередь использует только один поток для исполнения тасков, в то время как параллельная очередь может использовать несколько потоков для исполнения задач. Однако, **нет никакой гарантии, что параллельная очередь будет всегда использовать больше одного потока** для исполнения задач. Если система очень сильно нагружена, то нам будет выделен только один поток. 

### Асинхронность не означает параллелизм
Добавление таска в асинхронную очередь вовсе не означает, что они будут исполняться параллельно. В конце концов, если мы добавим 3 таска в последовательную асинхронную очередь, то гарантируется, что все эти три таска будут выполнены один за другим, т.к. у нас только один поток и прежде чем начать новую задачу, мы должны дождаться выполнения предыдущей.

## Operations
